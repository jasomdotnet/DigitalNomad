!function(){var t=2,o=document.getElementById("content"),e=document.getElementById("sentinel"),r=document.getElementById("spinner"),i=!1,n=500,s=!1,d=[1];function a(){var n=new XMLHttpRequest;n.open("POST",postUrl,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){if(200<=n.status&&4==n.readyState){var e=JSON.parse(n.responseText);if(!e.content)return e.hasOwnProperty("noMoreContent")?r.innerHTML=noMorePostsMsg:(console.log(unexpectedMsg),r.innerHTML=unexpectedMsg),void l();-1===d.indexOf(e.page)?(o.insertAdjacentHTML("beforeend",e.content),d.push(e.page),r.innerHTML=spinnerHTML):r.innerHTML=rescrollMsg,"undefined"!=typeof bLazy&&bLazy.revalidate(),t+=1,w()||setTimeout(function(){i=!1},2e3)}else console.log("AJAX request failed. Returned status is "+n.status+". That's all we know.")};var e={page:t,action:"digitalnomad_infinite_load",object:postTypeObject,what_kind:whatKind};n.send(function(e){var n="";for(var t in e)e.hasOwnProperty(t)&&(0<n.length&&(n+="&"),n+=encodeURI(t+"="+e[t]));return n}(e))}function c(){0==i&&window.pageYOffset+window.innerHeight+n>=o.offsetHeight&&(a(),i=!0),!0===s&&(window.removeEventListener("scroll",c),window.removeEventListener("resize",c))}if(w()){var u=new IntersectionObserver(function(e){e[0].intersectionRatio<=0||a()});u.observe(e)}else window.addEventListener("scroll",c),window.addEventListener("resize",c);function w(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}function l(){w()&&u.disconnect(),s=!0}}();